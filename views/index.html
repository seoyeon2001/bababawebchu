<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="/stylesheets/index_style.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>


    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <title>PangPang</title>
    <script>      
        fetch('/navbar')
              .then(response => response.text())
              .then(data => {
                  document.getElementById("content").innerHTML = data;
                  // navbar.htmlÏù¥ Î°úÎî©Îêú ÌõÑÏóê ÌÜ†ÌÅ∞ ÏÉÅÌÉúÎ•º ÌôïÏù∏ÌïòÍ≥† Î°úÍ∑∏Ïù∏/Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäºÏùÑ Ï†úÏñ¥ÌïòÎäî Ïä§ÌÅ¨Î¶ΩÌä∏Î•º Ï∂îÍ∞ÄÌï©ÎãàÎã§.
                  const token = sessionStorage.getItem('ÌÜ†ÌÅ∞');
                  if (token) {
                      document.getElementById("logoutButton").style.display = "block";
                  } else {
                      document.getElementById("logoutButton").style.display = "none";
                  }
              })
              .catch(error => console.error('Error:', error));
      </script>
      <style>
        .card{
            margin: 20px 20px ;
            border: 2px solid white;
        }
        .btn{
            font-size: 17px;
        }
      </style>
  </head>
  <body>
    <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖòÎ∞î -->
    <div id='content'></div>
    <div class="page-header theme-bg-dark py-5 text-center position-relative" >
	    <div class="container">
            <br>
            <br>
		    <h3 class="page-heading single-col-max mx-auto" style="font-weight: bold;">Ïó¨Îü¨Î∂ÑÏùò Ïä§Ìè¨Ï∏† ÌååÌä∏ÎÑàÎ•º Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî!</h3>
	    </div>
    </div>
    <hr class="my-4" style="height: 3px; background-color: #006f3e;">
    

    <div class="container-fluid" style="margin: 0 auto; width: 80%;">
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card bg-default" style="margin-bottom: 40px;">
                            <div class="card-body">
                              <table class="table table-hover table-striped">
                                <thead>
                                  <tr>
                                    <th>Ïª§ÎÆ§ÎãàÌã∞</th>
                                    <th>Ï†úÎ™©</th>
                                  </tr>
                                </thead>
                                <tbody id="communityTableBody">
                                <!-- Ïó¨Í∏∞Ïóê Í≤åÏãúÍ∏Ä Î™©Î°ùÏù¥ Ï∂îÍ∞ÄÎê® -->
                                </tbody>
                              </table>
                            </div>
                      </div>
                    </div>
                    <!--Ïª§ÎÆ§ÎãàÌã∞-->
                    <div class="col-md-6">
                        <div class="card" style="padding: 10px; ">
                            <div class="row">
                                <div class="col-md-12">
                                 
                                    <button type="button" class="btn" style="width: 600px; height: 110px; background-color: #006f3e; color:white;">
                                        ‚úèÔ∏è ÎÇòÏùò Îß§ÏπòÍ∏Ä
                                    </button>
                                </div>
                            </div>
                                <div class="row gx-50">
                                    <div class="col-md-4">
                                            
                                        <button type="button" class="btn" style="width: 190px; height: 110px; background-color: #006f3e; color:white;">
                                            üìå Í≥µÏßÄÏÇ¨Ìï≠
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                            
                                        <button type="button" class="btn" style="width: 190px; height: 110px; background-color: #006f3e; color:white;">
                                            ‚ùîÔ∏è Q&A
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                            
                                        <button type="button" class="btn" style="width: 190px; height: 110px; background-color: #006f3e; color:white;">
                                            üìÑ FAQ
                                        </button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                     
                                        <button type="button" class="btn" style="width: 600px; height: 110px; background-color: #006f3e; color:white;">
                                            üîó ÎÖ∏ÏõêÍµ¨ ÏãúÏÑ§Í¥ÄÎ¶¨Í≥µÎã®
                                        </button>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <!--Îã¨Î†•-->
                        <div class="card">
                            <div class="card-body">
                                Ïö¥ÎèôÌïòÍ≥† Ïã∂ÏùÄ ÎÇ†ÏùÑ ÏÑ†ÌÉùÌï¥Î≥¥ÏÑ∏Ïöî!
                                
                                <table class="Calendar">
                                    <thead>
                                        <tr>
                                            <td onClick="prevCalendar();" style="cursor:pointer;">&#60;</td>
                                            <td colspan="5">
                                                <span id="calYear"></span>ÎÖÑ
                                                <span id="calMonth"></span>Ïõî
                                            </td>
                                            <td onClick="nextCalendar();" style="cursor:pointer;">&#62;</td>
                                        </tr>
                                        <tr>
                                            <td>Ïùº</td>
                                            <td>Ïõî</td>
                                            <td>Ìôî</td>
                                            <td>Ïàò</td>
                                            <td>Î™©</td>
                                            <td>Í∏à</td>
                                            <td>ÌÜ†</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 text-center">
                        <!--ÎÇ†Ïî®-->
                        <div class="card text-center">
                            <div class="card-body" >
                                <div class="row" style=" width: 464px;" >
                                    <div class="col-md-12">
                                        <div id="ww_ef52dafbb06df" v='1.3' loc='id' a='{"t":"responsive","lang":"ko","sl_lpl":1,"ids":["wl4479"],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>More forecasts: <a href="https://sharpweather.com/ko/seoul/" id="ww_ef52dafbb06df_u" target="_blank">ÏÑúÏö∏ ÎÇ†Ïî®</a></div><script async src="https://app2.weatherwidget.org/js/?id=ww_ef52dafbb06df"></script>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div id="ww_1dca7758b9d74" v='1.3' loc='id' a='{"t":"horizontal","lang":"ko","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>More forecasts: <a href="https://sharpweather.com/ko/seoul/" id="ww_1dca7758b9d74_u" target="_blank">ÏÑúÏö∏ ÎÇ†Ïî®</a></div><script async src="https://app2.weatherwidget.org/js/?id=ww_1dca7758b9d74"></script>
                                    </div>
                                </div>

                                </div>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script>
    const tbody = document.querySelector('tbody');
    
    function getCategoryInKorean(category) {
      switch(category) {
        case 'daily':
          return 'ÏûêÏú†Í≤åÏãúÌåê';
        case 'equipment':
          return 'Ïû•ÎπÑÍ≤åÏãúÌåê';
        case 'tip':
          return 'ÍøÄÌåÅÍ≤åÏãúÌåê';
        case 'market':
          return 'Ïû•ÌÑ∞Í≤åÏãúÌåê';
        case 'promotion':
          return 'ÌôçÎ≥¥Í≤åÏãúÌåê';
        default:
          return category;
      }
    }
    function fetchData(page) {
        fetch(`/community/list?page=${page}`)
            .then(response => response.json())
            .then(data => {
            tbody.innerHTML = ''; // Clear the table

            // Limiting to display only 5 posts or posts available if less than 5
            const numberOfPosts = Math.min(7, data.boards.length);

            for (let index = 0; index < numberOfPosts; index++) {
                const community = data.boards[index];
                const row = document.createElement('tr');
                const formattedDate = new Date(community.createdAt).toLocaleDateString();
                row.innerHTML = `
                <td>${getCategoryInKorean(community.category)}</td>
                <td>${community.title}</td>
                `;
                row.addEventListener('click', () => {
                // Redirect to the detailed view of the community
                window.location.href = `/community/read/${community._id}`;
                });
                tbody.appendChild(row);
            }
            })
            .catch(error => console.error('Error:', error));
        }

    // Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ Î°úÎî©
    fetchData(1);
    




    //Îã¨Î†•
    window.onload = function () { buildCalendar(); }    // Ïõπ ÌéòÏù¥ÏßÄÍ∞Ä Î°úÎìúÎêòÎ©¥ buildCalendar Ïã§Ìñâ

    let nowMonth = new Date();  // ÌòÑÏû¨ Îã¨ÏùÑ ÌéòÏù¥ÏßÄÎ•º Î°úÎìúÌïú ÎÇ†Ïùò Îã¨Î°ú Ï¥àÍ∏∞Ìôî
    let today = new Date();     // ÌéòÏù¥ÏßÄÎ•º Î°úÎìúÌïú ÎÇ†ÏßúÎ•º Ï†ÄÏû•
    today.setHours(0, 0, 0, 0);    // ÎπÑÍµê Ìé∏ÏùòÎ•º ÏúÑÌï¥ todayÏùò ÏãúÍ∞ÑÏùÑ Ï¥àÍ∏∞Ìôî

    // Îã¨Î†• ÏÉùÏÑ± : Ìï¥Îãπ Îã¨Ïóê ÎßûÏ∂∞ ÌÖåÏù¥Î∏îÏùÑ ÎßåÎì§Í≥†, ÎÇ†ÏßúÎ•º Ï±ÑÏõå ÎÑ£ÎäîÎã§.
    function buildCalendar() {

        let firstDate = new Date(nowMonth.getFullYear(), nowMonth.getMonth(), 1);     // Ïù¥Î≤àÎã¨ 1Ïùº
        let lastDate = new Date(nowMonth.getFullYear(), nowMonth.getMonth() + 1, 0);  // Ïù¥Î≤àÎã¨ ÎßàÏßÄÎßâÎÇ†

        let tbody_Calendar = document.querySelector(".Calendar > tbody");
        document.getElementById("calYear").innerText = nowMonth.getFullYear();             // Ïó∞ÎèÑ Ïà´Ïûê Í∞±Ïã†
        document.getElementById("calMonth").innerText = leftPad(nowMonth.getMonth() + 1);  // Ïõî Ïà´Ïûê Í∞±Ïã†

        while (tbody_Calendar.rows.length > 0) {                        // Ïù¥Ï†Ñ Ï∂úÎ†•Í≤∞Í≥ºÍ∞Ä ÎÇ®ÏïÑÏûàÎäî Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî
            tbody_Calendar.deleteRow(tbody_Calendar.rows.length - 1);
        }

        let nowRow = tbody_Calendar.insertRow();        // Ï≤´Î≤àÏß∏ Ìñâ Ï∂îÍ∞Ä           

        for (let j = 0; j < firstDate.getDay(); j++) {  // Ïù¥Î≤àÎã¨ 1ÏùºÏùò ÏöîÏùºÎßåÌÅº
            let nowColumn = nowRow.insertCell();        // Ïó¥ Ï∂îÍ∞Ä
        }

        for (let nowDay = firstDate; nowDay <= lastDate; nowDay.setDate(nowDay.getDate() + 1)) {   // dayÎäî ÎÇ†ÏßúÎ•º Ï†ÄÏû•ÌïòÎäî Î≥ÄÏàò, Ïù¥Î≤àÎã¨ ÎßàÏßÄÎßâÎÇ†ÍπåÏßÄ Ï¶ùÍ∞ÄÏãúÌÇ§Î©∞ Î∞òÎ≥µ  

            let nowColumn = nowRow.insertCell();        // ÏÉà Ïó¥ÏùÑ Ï∂îÍ∞ÄÌïòÍ≥†


            let newDIV = document.createElement("p");
            newDIV.innerHTML = leftPad(nowDay.getDate());        // Ï∂îÍ∞ÄÌïú Ïó¥Ïóê ÎÇ†Ïßú ÏûÖÎ†•
            nowColumn.appendChild(newDIV);

            if (nowDay.getDay() == 6) {                 // ÌÜ†ÏöîÏùºÏù∏ Í≤ΩÏö∞
                nowRow = tbody_Calendar.insertRow();    // ÏÉàÎ°úÏö¥ Ìñâ Ï∂îÍ∞Ä
            }

            if (nowDay < today) {                       // ÏßÄÎÇúÎÇ†Ïù∏ Í≤ΩÏö∞
                newDIV.className = "pastDay";
            }
            else if (nowDay.getFullYear() == today.getFullYear() && nowDay.getMonth() == today.getMonth() && nowDay.getDate() == today.getDate()) { // Ïò§ÎäòÏù∏ Í≤ΩÏö∞           
                newDIV.className = "today";
                newDIV.onclick = function () { choiceDate(this); }
            }
            else {                                      // ÎØ∏ÎûòÏù∏ Í≤ΩÏö∞
                newDIV.className = "futureDay";
                newDIV.onclick = function () { choiceDate(this); }
            }
        }
    }

    // ÎÇ†Ïßú ÏÑ†ÌÉù
    function choiceDate(newDIV) {
        if (document.getElementsByClassName("choiceDay")[0]) {                              // Í∏∞Ï°¥Ïóê ÏÑ†ÌÉùÌïú ÎÇ†ÏßúÍ∞Ä ÏûàÏúºÎ©¥
            document.getElementsByClassName("choiceDay")[0].classList.remove("choiceDay");  // Ìï¥Îãπ ÎÇ†ÏßúÏùò "choiceDay" class Ï†úÍ±∞
        }
        newDIV.classList.add("choiceDay");           // ÏÑ†ÌÉùÎêú ÎÇ†ÏßúÏóê "choiceDay" class Ï∂îÍ∞Ä

        // Ìï¥Îãπ ÎÇ†ÏßúÏóê ÏûàÎäî Îß§Ïπò Í∏Ä Í∞ÄÏßÄÍ≥†Ïò§Í∏∞
        const date = new Date(nowMonth.getFullYear(), nowMonth.getMonth(), newDIV.innerText);   // ÏÑ†ÌÉùÌïú ÎÇ†ÏßúÏùò Date Í∞ùÏ≤¥ ÏÉùÏÑ±
        window.location.href = `/match/date/${date}`;
    }

    // Ïù¥Ï†ÑÎã¨ Î≤ÑÌäº ÌÅ¥Î¶≠
    function prevCalendar() {
        nowMonth = new Date(nowMonth.getFullYear(), nowMonth.getMonth() - 1, nowMonth.getDate());   // ÌòÑÏû¨ Îã¨ÏùÑ 1 Í∞êÏÜå
        buildCalendar();    // Îã¨Î†• Îã§Ïãú ÏÉùÏÑ±
    }
    // Îã§ÏùåÎã¨ Î≤ÑÌäº ÌÅ¥Î¶≠
    function nextCalendar() {
        nowMonth = new Date(nowMonth.getFullYear(), nowMonth.getMonth() + 1, nowMonth.getDate());   // ÌòÑÏû¨ Îã¨ÏùÑ 1 Ï¶ùÍ∞Ä
        buildCalendar();    // Îã¨Î†• Îã§Ïãú ÏÉùÏÑ±
    }

    // inputÍ∞íÏù¥ ÌïúÏûêÎ¶¨ Ïà´ÏûêÏù∏ Í≤ΩÏö∞ ÏïûÏóê '0' Î∂ôÌòÄÏ£ºÎäî Ìï®Ïàò
    function leftPad(value) {
        if (value < 10) {
            value = "0" + value;
            return value;
        }
        return value;
    }
    </script>
</body>
</html>